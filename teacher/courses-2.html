<!--A Design by W3layouts
Author: W3layout
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html>
<head>
<title>The Learn Center Flat Responsive Education Website Template | About :: w3layouts</title>
<meta name="viewport" content="width=device-width, initial-scale=1">	
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<meta name="keywords" content="Bootstrap Responsive Templates, Iphone Compatible Templates, Smartphone Compatible Templates, Ipad Compatible Templates, Flat Responsive Templates"/>
<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
<link href="css/style.css" rel='stylesheet' type='text/css' />
<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
<script src="js/jquery.min.js"></script>  
<!---- start-smoth-scrolling---->
<script type="text/javascript" src="js/move-top.js"></script>
<script type="text/javascript" src="js/easing.js"></script>
<script type="text/javascript">
			jQuery(document).ready(function($) {
				$(".scroll").click(function(event){		
					event.preventDefault();
					$('html,body').animate({scrollTop:$(this.hash).offset().top},1000);
				});
			});
		</script>

<!---- start-smoth-scrolling---->
<script>
$( document ).ready(function() {
if ( $('[type="date"]').prop('type') != 'date' ) {
    $('[type="date"]').datepicker();
}
});
</script>
<style>
button {
  margin: 0 10px 0 0;
  padding: 15px 45px;
  font-size: 12px;
  line-height: 1.8;
  appearance: none;
  box-shadow: none;
  border-radius: 0;
  float : right;
}

button:focus {
  outline: none
}
section.flat button {
  color: #fff;
  background-color: #6496c8;
  text-shadow: -1px 1px #417cb8;
  border: none;
}

section.flat button:hover,
section.flat button.hover {
  background-color: #346392;
  text-shadow: -1px 1px #27496d;
}

section.flat button:active,
section.flat button.active {
  background-color: #27496d;
  text-shadow: -1px 1px #193047;
}
</style>
<script charset="utf-8" src="js/apiomat.js"></script>
<script charset="utf-8" src="js/jstorage.js"></script>
</head>
<body onload="init()">
	<div class="banner1" id="home">
		<div class="container">
			<div class="header">
				<div class="menu">
                                     <a class="toggleMenu" href="#"><img src="images/menu-icon.png" alt="" /> </a>
					<ul class="nav" id="nav">
					<li><a href="dashboard-2.html" class="active">Dashboard</a></li>
					<li><a href="modul-2.html">Modul</a></li>
					<li class="active" ><a href="courses-2.html">Kursus</a></li>
					<li><a href="#">Logout</a></li>
					</ul>
                                  <!----start-top-nav-script---->
		                      <script type="text/javascript" src="js/responsive-nav.js"></script>
					<script type="text/javascript">
					jQuery(document).ready(function($) {
						$(".scroll").click(function(event){		
							event.preventDefault();
							$('html,body').animate({scrollTop:$(this.hash).offset().top},1000);
						});
					});
					</script>
		<!----//End-top-nav-script---->
				</div>
				<div class="clearfix"> </div>
			</div>
			<!--/start-text-slider-->
		
	 <!--//text-slider-->
		</div>
	</div>
	<!--start-about-->
	
	<!--end-about-->
	<!--start-vision-->
	<div class="success">
		<div class="container">
			<div class="success-main">
				<div class="col-md-12 success-left">
					<h3>Daftar Kursus</h3>
					<div class="success-bottom">
						<div class="success-bottom-left">
							<h6>1</h6>
						</div>
						<div class="success-bottom-right">
							<p>Tulislah nama kursus (mata kuliah/pelajaran).</p>
							<div class="contact-text">
						    <input id="nama_kursus" type="text"  placeholder="Nama" />
					        </div>
						</div>
						<div class="clearfix"> </div>
					</div>
					
					<div class="success-bottom">
						<div class="success-bottom-left">
							<h6>2</h6>
						</div>
						<div class="success-bottom-right">
							<p>Tuliskan deskripsi kursus anda.</p>
							<div class="contact-text">
						    <div  class="contact-textarea">
						    <textarea id="deskripsi" value="" ></textarea>
					        </div>
					        </div>
						</div>
						<div class="clearfix"> </div>
					</div>
					
					<div class="success-bottom">
						<div class="success-bottom-left">
							<h6>3</h6>
						</div>
						<div class="success-bottom-right">
							<p>Tanggal.</p>
							<div class="contact-text">
							 <input type='date' id="tanggal" />
							 <p>Jam</p>
							<input id="jam" type="number"  placeholder="Nama" />
					        </div>
							
				           
						</div>
						<div class="clearfix"> </div>
					</div>
					
					<section class="flat">
						<button onclick="save_Courses()" id="buttonS"  >Simpan</button> 					
					</section>
					<br><p id="statusS"></p><br>
					<p id="list_status"></p>
				<br><br>	
				<table class="table table-striped table-bordered table-hover" >
                  <thead>
                    <tr>
                      <th>Nama</th>
					  <th>Deskripsi</th>
					  <th>Tanggal</th>
					  <th>Jam</th>
					  <th>Aktivitas</th>
                    </tr>
                  </thead>

                  <tbody id="daftar_kursus">
				  
				  </tbody>
                </table>
				</div>
				
				
				<div class="clearfix"> </div>
			</div>
		</div>
	</div>
	<!--end-vision-->
	<!--start-footer-->
	
	<!--end-footer-->
	
<script type="text/javascript">
//var favorite;

var v1 = $.jStorage.get("key_t1");
var v2 = $.jStorage.get("key_t2");
var buttonS = document.getElementById('buttonS');
var teacher_name = "";
var teacher_id = "" ;
var dataLength = 0;

    function init() {
        var user = new Apiomat.User();
        user.setUserName("Admin");
        user.setPassword("12345");
        Apiomat.Datastore.configure(user);
        var saveCB = {
            onOk: function() {    
            },
            onError: function(error) {    
            }
        };
        user.loadMe({
            onOk: function() {
			loadUser();
			
			
            },
            onError: function(error) {
                user.save(saveCB);
            }
        });
    }

    function loadUser() {
		
        var y = "email==" + '"' + v1 + '"' + " and " + "password==" + '"' + v2 + '"';
	
		Apiomat.Teacher.getTeachers(y, {
        onOk: function(data) {
                for (var i = 0; i < data.length; i++) {
					 teacher_name = data[i].data.name;
					 teacher_id = data[i].getID();
                }loadTask();
            },
            onError: function(error) {} });	
    }
	
	
    function loadTask() {
		
        var y = "teacher_id==" + '"' + teacher_id + '"' ;
	
		Apiomat.Courses.getCoursess(y, {
        onOk: function(data) {
                for (var i = 0; i < data.length; i++) {
					 document.getElementById("daftar_kursus").innerHTML += "<tr><td>"+data[i].getCourses_name()+"</td><td>"+data[i].getCourses_description()+"</td><td>"+data[i].getCourses_date()+"</td><td>"+data[i].getCourses_time()+"</td><td><a class = 'btn btn-default btn-lg' role = 'button' onclick='deleteList("+'"'+data[i].getID()+ '"'+")'  >Hapus</button></a></td></tr>" ;

                };
            },
            onError: function(error) {} });	
    }
	
	function save_Courses() {
        
        var a = document.getElementById("nama_kursus").value;
        var b = document.getElementById("deskripsi").value;
		var c = document.getElementById("tanggal").value;
		var d = document.getElementById("jam").value;
        
		buttonS.style.display = (buttonS.style.display != 'visible') ? 'none' : '';
        if (a != "" && b != "" && c != "" && d != "" ) {
            var task = new Apiomat.Courses();
            task.setCourses_name(a);
            task.setCourses_description(b);
			task.setCourses_date(c);
			task.setCourses_time(d);
			task.setCourses_teacher(teacher_name);
			task.setTeacher_id(teacher_id);

            task.save({
                onOk: function() {
                    document.getElementById("statusS").innerHTML = '&nbsp;'+ "Berhasil Disimpan";
					setTimeout(function() {location.reload();}, 3000);
                }, onError: function(error) {}
            });

        } else {
            document.getElementById("statusS").innerHTML = '&nbsp;'+"Mohon ulangi. isi semua data";
            buttonS.style.display = (buttonS.style.display != 'none') ? 'visible' : '';
        }
    }

    
	
	function deleteList(id) {
     var z = "id==id"+'('+id+')' ;
     Apiomat.Courses.getCoursess(z, {
        onOk: function(data) {
                for (var i = 0; i < data.length; i++) {
					 addToDelete(data[i]);
                };
            },
            onError: function(error) {} });	
    }
	

	
	function addToDelete(del) {
        del.deleteModel({
            onOk: function() {
                document.getElementById("list_status").innerHTML = "<br> <div class='alert alert-success' role='alert'><strong>OK!</strong> Data berhasil dihapus</div>";
                   setTimeout(function() {
                   window.location.href = "courses-2.html";
                },2000);
				

            },
            onError: function(error) {
                
            }
        });
    }
	
	
    

    
</script>
</body>
</html>